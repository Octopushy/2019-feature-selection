<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Patrick Schratz" />


<title>Inspecting {glmnet} performances</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<div><img src="logo/life.jpg" align="right" style="width:200px;margin-top:15px" ></div>

<div><img src="logo/fsu.png" align="left" style="width:200px;margin-top:15px" ></div>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">2019-feature-selection</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="license.html">License</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Project
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="report-defoliation.html">Prediction of defoliation at trees</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Paper
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="eda.html">Exploratory data analysis</a>
    </li>
    <li>
      <a href="filter-correlation.html">Filter correlation analysis</a>
    </li>
    <li>
      <a href="eval-performance.html">Performance evaluation</a>
    </li>
    <li>
      <a href="feature-importance.html">Feature importance</a>
    </li>
    <li>
      <a href="spectral-signatures.html">Spectral signatures</a>
    </li>
    <li>
      <a href="response-normality.html">Checking for normality of response</a>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Side Analysis</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="inspect-glmnet-models.html">Inspect {glmnet} models</a>
        </li>
      </ul>
    </li>
  </ul>
</li>
<li>
  <a href="timeline.html">Timeline</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Inspecting {glmnet} performances</h1>
<h4 class="author">Patrick Schratz</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#general-glmnet-notes">General glmnet notes</a></li>
<li><a href="#inspect-fitted-models-during-cv">Inspect fitted models during CV</a></li>
<li><a href="#trainpredict-via-glmnet-manually">Train/predict via {glmnet} manually</a><ul>
<li><a href="#partial-dependence-plots">Partial Dependence Plots</a></li>
</ul></li>
</ul>
</div>

<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-report" data-toggle="collapse" data-target="#workflowr-report">
<span class="glyphicon glyphicon-list" aria-hidden="true"></span> workflowr <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
</button>
</p>
<div id="workflowr-report" class="collapse">
<ul class="nav nav-tabs">
<li class="active">
<a data-toggle="tab" href="#summary">Summary</a>
</li>
<li>
<a data-toggle="tab" href="#checks"> Checks <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> </a>
</li>
<li>
<a data-toggle="tab" href="#versions">Past versions</a>
</li>
</ul>
<div class="tab-content">
<div id="summary" class="tab-pane fade in active">
<p>
<strong>Last updated:</strong> 2020-03-11
</p>
<p>
<strong>Checks:</strong> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> 7 <span class="glyphicon glyphicon-exclamation-sign text-danger" aria-hidden="true"></span> 0
</p>
<p>
<strong>Knit directory:</strong> <code>2019-feature-selection/</code> <span class="glyphicon glyphicon-question-sign" aria-hidden="true" title="This is the local directory in which the code in this file was executed."> </span>
</p>
<p>
This reproducible <a href="http://rmarkdown.rstudio.com">R Markdown</a> analysis was created with <a
  href="https://github.com/jdblischak/workflowr">workflowr</a> (version 1.6.0). The <em>Checks</em> tab describes the reproducibility checks that were applied when the results were created. The <em>Past versions</em> tab lists the development history.
</p>
<hr>
</div>
<div id="checks" class="tab-pane fade">
<div id="workflowr-checks" class="panel-group">
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRMarkdownfilestronguptodate"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>R Markdown file:</strong> up-to-date </a>
</p>
</div>
<div id="strongRMarkdownfilestronguptodate" class="panel-collapse collapse">
<div class="panel-body">
<p>Great! Since the R Markdown file has been committed to the Git repository, you know the exact version of the code that produced these results.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongEnvironmentstrongempty"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Environment:</strong> empty </a>
</p>
</div>
<div id="strongEnvironmentstrongempty" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! The global environment was empty. Objects defined in the global environment can affect the analysis in your R Markdown file in unknown ways. For reproduciblity it’s best to always run the code in an empty environment.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSeedstrongcodesetseed20190522code"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Seed:</strong> <code>set.seed(20190522)</code> </a>
</p>
</div>
<div id="strongSeedstrongcodesetseed20190522code" class="panel-collapse collapse">
<div class="panel-body">
<p>The command <code>set.seed(20190522)</code> was run prior to running the code in the R Markdown file. Setting a seed ensures that any results that rely on randomness, e.g. subsampling or permutations, are reproducible.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSessioninformationstrongrecorded"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Session information:</strong> recorded </a>
</p>
</div>
<div id="strongSessioninformationstrongrecorded" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Recording the operating system, R version, and package versions is critical for reproducibility.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongCachestrongnone"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Cache:</strong> none </a>
</p>
</div>
<div id="strongCachestrongnone" class="panel-collapse collapse">
<div class="panel-body">
<p>Nice! There were no cached chunks for this analysis, so you can be confident that you successfully produced the results during this run.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongFilepathsstrongrelative"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>File paths:</strong> relative </a>
</p>
</div>
<div id="strongFilepathsstrongrelative" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Using relative paths to the files within your workflowr project makes it easier to run your code on other machines.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRepositoryversionstrongahrefhttpsgithubcompats2019featureselectiontree960355af1c168cc257d4cce7fdc4436625e30fb4targetblank960355aa"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Repository version:</strong> <a href="https://github.com/pat-s/2019-feature-selection/tree/960355af1c168cc257d4cce7fdc4436625e30fb4" target="_blank">960355a</a> </a>
</p>
</div>
<div id="strongRepositoryversionstrongahrefhttpsgithubcompats2019featureselectiontree960355af1c168cc257d4cce7fdc4436625e30fb4targetblank960355aa" class="panel-collapse collapse">
<div class="panel-body">
<p>
Great! You are using Git for version control. Tracking code development and connecting the code version to the results is critical for reproducibility. The version displayed above was the version of the Git repository at the time these results were generated. <br><br> Note that you need to be careful to ensure that all relevant files for the analysis have been committed to Git prior to generating the results (you can use <code>wflow_publish</code> or <code>wflow_git_commit</code>). workflowr only checks the R Markdown file, but you know if there are other scripts or data files that it depends on. Below is the status of the Git repository when the results were generated:
</p>
<pre><code>
Ignored files:
    Ignored:    .Rhistory
    Ignored:    .Rproj.user/
    Ignored:    .Ruserdata/
    Ignored:    .drake/
    Ignored:    .vscode/
    Ignored:    analysis/rosm.cache/
    Ignored:    data/
    Ignored:    inst/Benchmark for Filter Methods for Feature Selection in High-Dimensional  Classification Data.pdf
    Ignored:    inst/study-area-map/._study-area.qgs
    Ignored:    inst/study-area-map/study-area.qgs~
    Ignored:    log/
    Ignored:    renv/library/
    Ignored:    renv/staging/
    Ignored:    reviews/
    Ignored:    rosm.cache/

Untracked files:
    Untracked:  args-bm-laukiz2.rda
    Untracked:  code/06-modeling/project/

Unstaged changes:
    Modified:   .Rprofile
    Modified:   _drake.R
    Modified:   analysis/_site.yml
    Modified:   analysis/about.Rmd
    Modified:   analysis/report-defoliation.Rmd
    Modified:   code/02-hyperspectral-processing.R
    Modified:   code/03-sentinel-processing.R
    Modified:   code/06-modeling/paper/02-param-sets.R
    Modified:   code/06-modeling/paper/03-learner.R
    Modified:   code/06-modeling/paper/04-filter-wrapper.R
    Modified:   code/06-modeling/paper/07-tune-wrapper.R
    Modified:   code/06-modeling/paper/08-train.R
    Modified:   code/071-benchmark-matrix-buffer2.R
    Modified:   code/09-reports.R

</code></pre>
<p>
Note that any generated files, e.g. HTML, png, CSS, etc., are not included in this status report because it is ok for generated content to have uncommitted changes.
</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div id="versions" class="tab-pane fade">

<p>
These are the previous versions of the R Markdown and HTML files. If you’ve configured a remote Git repository (see <code>?wflow_git_remote</code>), click on the hyperlinks in the table below to view them.
</p>
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
File
</th>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
<th>
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/960355af1c168cc257d4cce7fdc4436625e30fb4/analysis/inspect-glmnet-models.Rmd" target="_blank">960355a</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
workflowr::wflow_publish(“analysis/inspect-glmnet-models.Rmd”)
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/pat-s/2019-feature-selection/c77844baa976580f3ab1e0fc2e554efd3ea04e73/docs/inspect-glmnet-models.html" target="_blank">c77844b</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/7f208c483e33681d3a6b10ec8e21b450ac46a9d7/analysis/inspect-glmnet-models.Rmd" target="_blank">7f208c4</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
workflowr::wflow_publish(“analysis/inspect-glmnet-models.Rmd”)
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/pat-s/2019-feature-selection/7123ae1008681a0b44ccba96b8823ce6be99b4f6/docs/inspect-glmnet-models.html" target="_blank">7123ae1</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/0f90dcf5dfca0226d72573f8fac3cfb1575ab2c9/analysis/inspect-glmnet-models.Rmd" target="_blank">0f90dcf</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
workflowr::wflow_publish(“analysis/inspect-glmnet-models.Rmd”)
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/pat-s/2019-feature-selection/0ce0893a1deb9008846367f2eb33efc2b97ce085/docs/inspect-glmnet-models.html" target="_blank">0ce0893</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/ee192125ab52e1bffa2a78bfd2f8a7ed9728fa13/analysis/inspect-glmnet-models.Rmd" target="_blank">ee19212</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
workflowr::wflow_publish(“analysis/inspect-glmnet-models.Rmd”)
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/pat-s/2019-feature-selection/89cd23ff92acbb56088518167c22a6bd5217994f/docs/inspect-glmnet-models.html" target="_blank">89cd23f</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/b56050eec0ec3da6f61d6e4ccdf9750ee91190cd/analysis/inspect-glmnet-models.Rmd" target="_blank">b56050e</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
workflowr::wflow_publish(“analysis/inspect-glmnet-models.Rmd”)
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/pat-s/2019-feature-selection/6f0317af536e7919612c8cc47e595697aa379b72/docs/inspect-glmnet-models.html" target="_blank">6f0317a</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/37a838b5e7382b0dcb0a44879d1a034f1907aa8c/analysis/inspect-glmnet-models.Rmd" target="_blank">37a838b</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
<td>
workflowr::wflow_publish(“analysis/inspect-glmnet-models.Rmd”)
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/pat-s/2019-feature-selection/2926d7ba8ee2908fbc914e347734dc4cbf74c960/docs/inspect-glmnet-models.html" target="_blank">2926d7b</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-08
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/b7e12c1a954819206b777a5a6440be1672c231f9/analysis/inspect-glmnet-models.Rmd" target="_blank">b7e12c1</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-08
</td>
<td>
wflow_publish(knitr_in(“analysis/inspect-glmnet-models.Rmd”), view =
</td>
</tr>
</tbody>
</table>
</div>
<hr>
</div>
</div>
</div>
<p>Last update:</p>
<p>[1] “Wed Mar 11 19:43:24 2020”</p>
<div id="general-glmnet-notes" class="section level2">
<h2>General glmnet notes</h2>
<ul>
<li>{glmnet} does its own internal 10-fold CV optimization when using <code>cv.glmnet()</code>. It iterates over <code>lambda</code> and chooses the most robust values for prediction via parameter <code>s</code> in <code>predict.glmnet()</code>. Supplying a custom lambda sequence does not make much sense since the internal heuristics are quite good (if one wants to use non-spatial optimization). See this <a href="https://stats.stackexchange.com/a/415248/101464">stats.stackexchange question</a> for how lambda defaults are estimated.</li>
<li>To conduct a spatial optimization, one needs to use <code>glmnet()</code> directly. This implementation does not do an internal optimization for <code>lambda</code> and hence <code>s</code> can/needs to be tuned directly by the user. Because it is hard to come up with good tuning ranges in this case, one can fit a <code>cv.glmnet()</code> on the data and use the borders of the estimated <code>lambda</code> as upper and lower borders of the tuning space.</li>
</ul>
</div>
<div id="inspect-fitted-models-during-cv" class="section level2">
<h2>Inspect fitted models during CV</h2>
<p>Inspect Ridge regression on VI task in detail because the error is enourmus.</p>
<p>First extract the models.</p>
<pre class="r"><code>models &lt;- benchmark_models_new_penalized_mbo_buffer2[[8]][[&quot;results&quot;]][[&quot;vi_buffer2&quot;]][[&quot;Ridge-MBO&quot;]][[&quot;models&quot;]]</code></pre>
<p>Then look at the fold performances</p>
<pre class="r"><code>benchmark_models_new_penalized_mbo_buffer2[[8]][[&quot;results&quot;]][[&quot;vi_buffer2&quot;]][[&quot;Ridge-MBO&quot;]][[&quot;measures.test&quot;]][[&quot;rmse&quot;]]</code></pre>
<pre><code>[1]           28.04421           21.44949           21.93398
[4] 199291640366.92307</code></pre>
<p>We see a high error on Fold 4 (= Laukiz 2). The others are also quite high but not “out of bounds”.</p>
<p>Let’s look at the full lambda sequence</p>
<pre class="r"><code>purrr::map_int(models, ~ length(.x[[&quot;learner.model&quot;]][[&quot;lambda&quot;]]))</code></pre>
<pre><code>[1]   5 100 100 100</code></pre>
<p>Interestingly, the lambda length of model 1 is not 100 (default) but only 5.</p>
</div>
<div id="trainpredict-via-glmnet-manually" class="section level2">
<h2>Train/predict via {glmnet} manually</h2>
<p>To inspect further, let’s refit a {glmnet} model directly on the training data of Fold 4 and inspect what <code>glmnet::cv.glmnet</code> estimates for the lambda sequence:</p>
<pre class="r"><code>train_inds_fold4 &lt;- benchmark_models_new_penalized_mbo_buffer2[[8]][[&quot;results&quot;]][[&quot;vi_buffer2&quot;]][[&quot;Ridge-MBO&quot;]][[&quot;pred&quot;]][[&quot;instance&quot;]][[&quot;train.inds&quot;]][[4]]

obs_train_f4 &lt;- as.matrix(task_new_buffer2[[2]]$env$data[train_inds_fold4, getTaskFeatureNames(task_new_buffer2[[2]])])
target_f4 &lt;- getTaskTargets(task_new_buffer2[[2]])[train_inds_fold4]</code></pre>
<p>Fit <code>cv.glmnet</code></p>
<pre class="r"><code>set.seed(1)
modf4 &lt;- glmnet::cv.glmnet(obs_train_f4, target_f4, alpha = 0)

modf4$lambda.1se</code></pre>
<pre><code>[1] 17.09715</code></pre>
<p>Predict on Laukiz 2 now.</p>
<pre class="r"><code>pred_inds_fold4 &lt;- benchmark_models_new_penalized_mbo_buffer2[[8]][[&quot;results&quot;]][[&quot;vi_buffer2&quot;]][[&quot;Ridge-MBO&quot;]][[&quot;pred&quot;]][[&quot;instance&quot;]][[&quot;test.inds&quot;]][[4]]

obs_pred_f4 &lt;- as.matrix(task_new_buffer2[[2]]$env$data[pred_inds_fold4, getTaskFeatureNames(task_new_buffer2[[2]])])

pred &lt;- predict(modf4, newx = obs_pred_f4, s = modf4$lambda.1se)</code></pre>
<p>Calculate the error</p>
<pre class="r"><code>truth &lt;- task_new_buffer2[[2]]$env$data[pred_inds_fold4, &quot;defoliation&quot;]

mlr:::measureRMSE(truth, pred)</code></pre>
<pre><code>[1] 97073324139</code></pre>
<p>Ok, RMSE of 97073324139. This is most likely because of a few. observations which were predicted completely out of bounds.</p>
<pre class="r"><code>qplot(pred, geom = &quot;histogram&quot;)</code></pre>
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="figure/inspect-glmnet-models.Rmd/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-unnamed-chunk-9-1">
Past versions of unnamed-chunk-9-1.png
</button>
</p>
<div id="fig-unnamed-chunk-9-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/c77844baa976580f3ab1e0fc2e554efd3ea04e73/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-9-1.png" target="_blank">c77844b</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
</tbody>
</table>
</div>
</div>
<pre class="r"><code>pred[which(pred &gt; 100), , drop = FALSE]</code></pre>
<pre><code>                1
737 2061522943649</code></pre>
<p>Ok, its one observation (row id = 737).</p>
<p>Let’s have a look at the predictor values for this observation.</p>
<pre class="r"><code>summary(obs_train_f4[737, ])</code></pre>
<pre><code>     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
 -465.332     0.495     1.248   244.077    13.569 15673.108 </code></pre>
<p>Ok, how does this compare to summaries of other observations? NB: Obs. 500 - 510 were chosen randomly. The purpose here is to see if something within the predictors for specific observations looks abnormal.</p>
<pre class="r"><code>lapply(seq(500:510), function(x) summary(obs_train_f4[x, ]))</code></pre>
<pre><code>[[1]]
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-241.698    0.543    1.342  136.208    9.122 8310.363 

[[2]]
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-162.222    0.557    1.092   88.503    7.497 5026.049 

[[3]]
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
 -358.944     0.452     1.286   198.458    10.548 12438.312 

[[4]]
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
 -88.5556    0.5348    1.0245   54.8659    7.3913 2870.3848 

[[5]]
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-104.903    0.545    1.063   61.960    8.315 3202.895 

[[6]]
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
 -311.475     0.527     1.277   172.420     9.705 10713.079 

[[7]]
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
 -440.426     0.488     1.384   226.684    11.486 14710.321 

[[8]]
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-135.505    0.601    1.104   76.380    8.666 4416.709 

[[9]]
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
 -408.230     0.563     1.243   217.687     9.761 13471.893 

[[10]]
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-228.969    0.570    1.067   81.748    8.795 4882.058 

[[11]]
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-180.651    0.539    1.101   91.665    7.273 5362.145 </code></pre>
<p>We have some higher values for obs 737 but nothing which stands out.</p>
<p>Let’s look at the model coefficients and Partial Dependence Plots (PDP):</p>
<pre class="r"><code>coef(modf4)</code></pre>
<pre><code>90 x 1 sparse Matrix of class &quot;dgCMatrix&quot;
                             1
(Intercept)    531.11225516839
bf2_Boochs       0.01856478558
bf2_Boochs2     -0.10174641139
bf2_CARI        -0.00101151781
bf2_Carter2     -0.54044992476
bf2_Carter3     -4.74060904178
bf2_Carter4      3.57395447927
bf2_Carter5      2.40033358279
bf2_Carter6     -0.01223220666
bf2_CI          17.44558789878
bf2_CI2         -0.09234363302
bf2_ClAInt      -0.00029867499
bf2_CRI1         3.93199597949
bf2_CRI2         3.93621597231
bf2_CRI3        -0.14102965215
bf2_CRI4         0.07745521805
bf2_D1          -0.21172763780
bf2_D2           4.48364959574
bf2_Datt       -29.92657011501
bf2_Datt2       -0.44902414236
bf2_Datt3       -5.82225051092
bf2_Datt4        9.73689861012
bf2_Datt5        0.43034087514
bf2_Datt6        0.52067426584
bf2_DD          -0.00466742370
bf2_DDn          0.00165874779
bf2_DPI         -2.94066199649
bf2_DWSI4       -0.27682042303
bf2_EGFR        -0.01998100611
bf2_EVI         -0.00201410021
bf2_GDVI_2      10.27846237651
bf2_GDVI_3      31.18505681072
bf2_GDVI_4       0.93958347942
bf2_GI          -0.34477144062
bf2_Gitelson     2.64273830373
bf2_Gitelson2   -0.02585043394
bf2_GMI1         0.16818982267
bf2_GMI2        -0.05229428190
bf2_Green.NDVI   1.73562944987
bf2_Maccioni   -16.16650612962
bf2_MCARI        0.00522029772
bf2_MCARI2      -0.00049064534
bf2_mND705      -0.64532841126
bf2_mNDVI        3.53489589242
bf2_MPRI        -0.03442634938
bf2_MSAVI        3.65757418934
bf2_mSR          0.00161463593
bf2_mSR2        -0.08935382573
bf2_mSR705      -0.09691169765
bf2_MTCI        -0.43694064196
bf2_MTVI        -0.00121734402
bf2_NDVI         1.93976587113
bf2_NDVI2       -0.49852301101
bf2_NDVI3        0.71581375642
bf2_NPCI         0.53555171520
bf2_OSAVI        1.71019327640
bf2_PARS         0.05888230273
bf2_PRI         -3.59215290150
bf2_PRI_norm   -95.26848890029
bf2_PRI.CI2     -2.84067572332
bf2_PSRI        -6.87122623622
bf2_PSSR         0.01087461932
bf2_PSND        -6.96686024116
bf2_SPVI.1      -0.00146273294
bf2_PWI         -2.54395514623
bf2_RDVI        -0.03620253189
bf2_REP_Li      -0.66792472297
bf2_SAVI         1.27179842863
bf2_SIPI        -5.23226754782
bf2_SPVI.2      -0.00146824633
bf2_SR          -0.01204737752
bf2_SR1         -0.05555531799
bf2_SR2         -0.01914132415
bf2_SR3          0.16764479685
bf2_SR4          0.99188378152
bf2_SR5         -5.57341447292
bf2_SR6         -0.22843650281
bf2_SR7         -0.09924316268
bf2_SR8         -1.27085004094
bf2_Sum_Dr1     -0.01285185223
bf2_Sum_Dr2     -0.00934767797
bf2_SRPI         0.01663453441
bf2_TCARI       -0.00050333567
bf2_TCARI2       0.00193142448
bf2_TGI         -0.00012288617
bf2_TVI         -0.00002379354
bf2_Vogelmann   -1.45492700073
bf2_Vogelmann2   6.48132112495
bf2_Vogelmann3   5.67673100608
bf2_Vogelmann4   4.98343236576</code></pre>
<p>Feature “bf2_PRI_norm” has a quite high value (-95).</p>
<pre class="r"><code>plotres(modf4)</code></pre>
<p><img src="figure/inspect-glmnet-models.Rmd/unnamed-chunk-14-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-unnamed-chunk-14-1">
Past versions of unnamed-chunk-14-1.png
</button>
</p>
<div id="fig-unnamed-chunk-14-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/c77844baa976580f3ab1e0fc2e554efd3ea04e73/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-14-1.png" target="_blank">c77844b</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/7123ae1008681a0b44ccba96b8823ce6be99b4f6/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-14-1.png" target="_blank">7123ae1</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
</tbody>
</table>
</div>
</div>
<pre class="r"><code>plot_glmnet(modf4$glmnet.fit)</code></pre>
<p><img src="figure/inspect-glmnet-models.Rmd/unnamed-chunk-15-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-unnamed-chunk-15-1">
Past versions of unnamed-chunk-15-1.png
</button>
</p>
<div id="fig-unnamed-chunk-15-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/c77844baa976580f3ab1e0fc2e554efd3ea04e73/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-15-1.png" target="_blank">c77844b</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/7123ae1008681a0b44ccba96b8823ce6be99b4f6/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-15-1.png" target="_blank">7123ae1</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
</tbody>
</table>
</div>
</div>
<pre class="r"><code>plotmo(modf4$glmnet.fit)</code></pre>
<pre><code> plotmo grid:    bf2_Boochs bf2_Boochs2 bf2_CARI bf2_Carter2 bf2_Carter3
                   1.998693    2.845148 80.11412   0.1234949  0.08682775
 bf2_Carter4 bf2_Carter5 bf2_Carter6   bf2_CI  bf2_CI2 bf2_ClAInt
   0.2861524    1.622418    19.10886 1.087452 5.280886   877.1538
   bf2_CRI1   bf2_CRI2 bf2_CRI3  bf2_CRI4   bf2_D1    bf2_D2  bf2_Datt
 0.04910712 0.06965439 -9.37543 -6.282868 1.514274 0.7339561 0.8177696
 bf2_Datt2 bf2_Datt3  bf2_Datt4 bf2_Datt5 bf2_Datt6   bf2_DD   bf2_DDn
  4.216579 0.7465023 0.01912338 0.7204213 0.3120446 63.41494 -266.1666
   bf2_DPI bf2_DWSI4 bf2_EGFR  bf2_EVI bf2_GDVI_2 bf2_GDVI_3 bf2_GDVI_4
 0.5886079  1.382126 7.359851 4.944853  0.9875098  0.9989018  0.9998978
  bf2_GI bf2_Gitelson bf2_Gitelson2 bf2_GMI1 bf2_GMI2 bf2_Green.NDVI
 1.43903   0.04093419      8.943006 8.631567 5.866379        0.80809
 bf2_Maccioni bf2_MCARI bf2_MCARI2 bf2_mND705 bf2_mNDVI bf2_MPRI bf2_MSAVI
    0.7883106  25.39617   397.1709  0.6687387 0.9220925 9.782586 0.9283319
  bf2_mSR bf2_mSR2 bf2_mSR705 bf2_MTCI bf2_MTVI  bf2_NDVI bf2_NDVI2
 28.73996  3.88811   5.140166 3.635395 247.0532 0.8593618 0.6208416
 bf2_NDVI3  bf2_NPCI bf2_OSAVI bf2_PARS     bf2_PRI bf2_PRI_norm
 -0.137058 0.2540456  1.005096 16.79849 -0.02239909 0.0009611926
 bf2_PRI.CI2   bf2_PSRI bf2_PSSR  bf2_PSND bf2_SPVI.1  bf2_PWI bf2_RDVI
  -0.1033416 0.03712631 13.42027 0.9324896    238.338 1.013997 11.67572
 bf2_REP_Li bf2_SAVI bf2_SIPI bf2_SPVI.2   bf2_SR  bf2_SR1  bf2_SR2
   724.5711  1.29702 1.042882    238.338 14.16137 5.866379 9.883037
  bf2_SR3  bf2_SR4   bf2_SR5  bf2_SR6   bf2_SR7   bf2_SR8 bf2_Sum_Dr1
 8.631567 2.146826 0.4827658 3.288378 0.3703371 0.5433803    38.28711
 bf2_Sum_Dr2  bf2_SRPI bf2_TCARI bf2_TCARI2  bf2_TGI  bf2_TVI
    33.57344 0.6054507  31.51822   3.176928 922.7046 8765.983
 bf2_Vogelmann bf2_Vogelmann2 bf2_Vogelmann3 bf2_Vogelmann4
       1.84361     -0.2100082       1.316905     -0.2384276</code></pre>
<p><img src="figure/inspect-glmnet-models.Rmd/unnamed-chunk-16-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-unnamed-chunk-16-1">
Past versions of unnamed-chunk-16-1.png
</button>
</p>
<div id="fig-unnamed-chunk-16-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/c77844baa976580f3ab1e0fc2e554efd3ea04e73/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-16-1.png" target="_blank">c77844b</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/7123ae1008681a0b44ccba96b8823ce6be99b4f6/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-16-1.png" target="_blank">7123ae1</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Let’s figure out which are the ten most important features and create PDPs for these:</p>
<pre class="r"><code>top_ten_abs &lt;- coef(modf4) %&gt;%
  as.matrix() %&gt;%
  as.data.frame() %&gt;%
  dplyr::rename(coef = `1`) %&gt;%
  dplyr::mutate(feature = rownames(coef(modf4))) %&gt;%
  dplyr::slice(-1) %&gt;%
  dplyr::mutate(coef_abs = abs(coef)) %&gt;%
  dplyr::arrange(desc(coef_abs)) %&gt;%
  dplyr::slice(1:10) %&gt;%
  dplyr::pull(feature)

top_ten_abs</code></pre>
<pre><code> [1] &quot;bf2_PRI_norm&quot;   &quot;bf2_GDVI_3&quot;     &quot;bf2_Datt&quot;       &quot;bf2_CI&quot;        
 [5] &quot;bf2_Maccioni&quot;   &quot;bf2_GDVI_2&quot;     &quot;bf2_Datt4&quot;      &quot;bf2_PSND&quot;      
 [9] &quot;bf2_PSRI&quot;       &quot;bf2_Vogelmann2&quot;</code></pre>
<div id="partial-dependence-plots" class="section level3">
<h3>Partial Dependence Plots</h3>
<p>For PDP we use a model trained with {mlr} and check for equality first.</p>
<pre class="r"><code>lrn &lt;- makeLearner(&quot;regr.cvglmnet&quot;, alpha = 0)
task_f4 &lt;- subsetTask(task_new_buffer2[[2]], train_inds_fold4)

set.seed(1)
mod_mlr &lt;- train(lrn, task_f4)</code></pre>
<p>Check lambda sequence and <code>lambda.1se</code>:</p>
<pre class="r"><code>mod_mlr$learner.model$lambda</code></pre>
<pre><code>  [1] 4983.9093118 4541.1525452 4137.7290693 3770.1446232 3435.2153661
  [6] 3130.0403011 2851.9761478 2598.6144474 2367.7607022 2157.4153674
 [11] 1965.7565324 1791.1241401 1632.0056082 1487.0227281 1354.9197274
 [16] 1234.5523933 1124.8781613 1024.9470858  933.8936117  850.9290772
 [21]  775.3348833  706.4562693  643.6966414  586.5124060  534.4082604
 [26]  486.9329034  443.6751264  404.2602510  368.3468845  335.6239625
 [31]  305.8080548  278.6409100  253.8872196  231.3325788  210.7816301
 [36]  192.0563710  174.9946123  159.4485733  145.2836015  132.3770068
 [41]  120.6169984  109.9017167  100.1383511   91.2423360   83.1366183
 [46]   75.7509903   69.0214811   62.8898030   57.3028462   52.2122193
 [51]   47.5738296   43.3475017   39.4966291   35.9878575   32.7907954
 [56]   29.8777515   27.2234944   24.8050342   22.6014233   20.5935752
 [61]   18.7640987   17.0971479   15.5782844   14.1943526   12.9333654
 [66]   11.7844009   10.7375072    9.7836166    8.9144671    8.1225304
 [71]    7.4009472    6.7434674    6.1443964    5.5985451    5.1011858
 [76]    4.6480105    4.2350941    3.8588600    3.5160495    3.2036934
 [81]    2.9190861    2.6597625    2.4234765    2.2081816    2.0120128
 [86]    1.8332711    1.6704084    1.5220139    1.3868024    1.2636027
 [91]    1.1513477    1.0490651    0.9558691    0.8709523    0.7935793
 [96]    0.7230799    0.6588435    0.6003136    0.5469834    0.4983909</code></pre>
<pre class="r"><code>mod_mlr$learner.model$lambda.1se</code></pre>
<pre><code>[1] 17.09715</code></pre>
<p>Check for equality between {mlr} and {glmnet} directly</p>
<pre class="r"><code>all.equal(modf4$lambda.1se, mod_mlr$learner.model$lambda.1se)</code></pre>
<pre><code>[1] TRUE</code></pre>
<pre class="r"><code>pdp &lt;- generatePartialDependenceData(mod_mlr, task_f4, features = top_ten_abs)</code></pre>
<pre><code>Loading required package: mmpf</code></pre>
<pre class="r"><code>plotPartialDependence(pdp)</code></pre>
<p><img src="figure/inspect-glmnet-models.Rmd/unnamed-chunk-23-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-unnamed-chunk-23-1">
Past versions of unnamed-chunk-23-1.png
</button>
</p>
<div id="fig-unnamed-chunk-23-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/c77844baa976580f3ab1e0fc2e554efd3ea04e73/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-23-1.png" target="_blank">c77844b</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/7123ae1008681a0b44ccba96b8823ce6be99b4f6/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-23-1.png" target="_blank">7123ae1</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Individual PDP</p>
<pre class="r"><code>pdp_ind &lt;- generatePartialDependenceData(mod_mlr, task_f4,
  features = top_ten_abs,
  individual = TRUE
)
plotPartialDependence(pdp_ind)</code></pre>
<p><img src="figure/inspect-glmnet-models.Rmd/unnamed-chunk-24-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-unnamed-chunk-24-1">
Past versions of unnamed-chunk-24-1.png
</button>
</p>
<div id="fig-unnamed-chunk-24-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/c77844baa976580f3ab1e0fc2e554efd3ea04e73/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-24-1.png" target="_blank">c77844b</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
<tr>
<td>
<a href="https://github.com/pat-s/2019-feature-selection/blob/7123ae1008681a0b44ccba96b8823ce6be99b4f6/docs/figure/inspect-glmnet-models.Rmd/unnamed-chunk-24-1.png" target="_blank">7123ae1</a>
</td>
<td>
pat-s
</td>
<td>
2020-03-11
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Let’s look at the x values for observation 737:</p>
<pre class="r"><code>obs_train_f4[737, top_ten_abs]</code></pre>
<pre><code>  bf2_PRI_norm     bf2_GDVI_3       bf2_Datt         bf2_CI   bf2_Maccioni 
  0.0005331477   0.9997067366   0.8283409902   1.1411477583   0.8079021105 
    bf2_GDVI_2      bf2_Datt4       bf2_PSND       bf2_PSRI bf2_Vogelmann2 
  0.9946317460   0.0085985645   0.9510653828   0.0191196652  -0.2698871749 </code></pre>
<p>Looks ok - they are all within a normal range with respectv to the PDP estimates.</p>
<br>
<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-sessioninfo" data-toggle="collapse" data-target="#workflowr-sessioninfo" style="display: block;">
<span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Session information
</button>
</p>
<div id="workflowr-sessioninfo" class="collapse">
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>R version 3.6.1 (2019-07-05)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: CentOS Linux 7 (Core)

Matrix products: default
BLAS:   /opt/spack/opt/spack/linux-centos7-x86_64/gcc-9.2.0/r-3.6.1-j25wr6zcofibs2zfjwg37357rjj26lqb/rlib/R/lib/libRblas.so
LAPACK: /opt/spack/opt/spack/linux-centos7-x86_64/gcc-9.2.0/r-3.6.1-j25wr6zcofibs2zfjwg37357rjj26lqb/rlib/R/lib/libRlapack.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] mmpf_0.0.5         tidyselect_0.2.5   plotmo_3.5.6      
 [4] TeachingDemos_2.10 plotrix_3.7-7      Formula_1.2-3     
 [7] magrittr_1.5       ggplot2_3.2.1      glmnet_3.0-2      
[10] Matrix_1.2-15      mlr_2.17.0.9001    ParamHelpers_1.12 
[13] drake_7.10.0      

loaded via a namespace (and not attached):
 [1] Rcpp_1.0.3        txtq_0.1.4        lattice_0.20-38  
 [4] assertthat_0.2.1  zeallot_0.1.0     rprojroot_1.3-2  
 [7] digest_0.6.23     foreach_1.4.4     R6_2.4.1         
[10] backports_1.1.5   evaluate_0.13     pillar_1.4.3     
[13] rlang_0.4.4       lazyeval_0.2.1    data.table_1.12.6
[16] whisker_0.3-2     R.utils_2.8.0     R.oo_1.23.0      
[19] checkmate_1.9.1   rmarkdown_1.13    labeling_0.3     
[22] splines_3.6.1     stringr_1.4.0     igraph_1.2.4.1   
[25] munsell_0.5.0     compiler_3.6.1    httpuv_1.4.5.1   
[28] xfun_0.5          pkgconfig_2.0.3   shape_1.4.4      
[31] BBmisc_1.11       htmltools_0.3.6   tibble_2.1.3     
[34] workflowr_1.6.0   codetools_0.2-16  XML_3.98-1.17    
[37] fansi_0.4.1       crayon_1.3.4      dplyr_0.8.3      
[40] withr_2.1.2       later_1.0.0       R.methodsS3_1.7.1
[43] grid_3.6.1        gtable_0.2.0      git2r_0.26.1     
[46] storr_1.2.1       scales_1.0.0      stringi_1.3.1    
[49] fs_1.3.1          promises_1.0.1    parallelMap_1.4  
[52] filelock_1.0.2    vctrs_0.2.1       fastmatch_1.1-0  
[55] iterators_1.0.10  tools_3.6.1       glue_1.3.1       
[58] purrr_0.3.3       parallel_3.6.1    survival_2.43-3  
[61] yaml_2.2.0        colorspace_1.4-0  base64url_1.4    
[64] knitr_1.23       </code></pre>
</div>
</div>
</div>


<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
http://docs.mathjax.org/en/latest/configuration.html.  This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
